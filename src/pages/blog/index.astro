---
import Layout from "../../layouts/Layout.astro";
import { getCollection } from "astro:content";
const posts = (await getCollection("blog"))
  .filter(p => !p.data.draft)
  .sort((a,b) => b.data.pubDate.getTime() - a.data.pubDate.getTime());
---
<Layout title="Blog â€” My Astro Site">
  <h1 class="text-3xl font-bold mb-6">Blog</h1>
  <ul class="grid gap-6 md:grid-cols-2">
    {posts.map(({ slug, data }) => (
      <li class="rounded-2xl border border-slate-200 dark:border-slate-800 p-5 hover:shadow-md transition">
        <a class="text-lg font-semibold hover:underline" href={`/blog/${slug}/`}>{data.title}</a>
        <div class="text-sm text-slate-500 mt-1">{data.pubDate.toDateString()}</div>
        {data.description && <p class="text-slate-700 dark:text-slate-300 mt-3">{data.description}</p>}
      </li>
    ))}
  </ul>
</Layout>
